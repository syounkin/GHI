# MSA Population Size (F)

```{r msalibs, eval = TRUE, echo = TRUE, results = "hide", warning = FALSE, error = FALSE, message = FALSE}
rm(list=ls())
library("devtools")
#install_github("ITHIM/ITHIM", ref="devel")
install("~/ITHIM/")
library("ITHIM")
```
## List of Population Size Matrices

```{r msamsa, eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE}
msaIDFile <- read.csv(system.file("join2.csv", package = "ITHIM"), stringsAsFactors = FALSE)
msaIDs <- msaIDFile$msaNHTS %>% unique
msaIDs <- msaIDs[!is.na(msaIDs)] %>% as.list
names(msaIDs) <- msaIDs
populationList <- getPopulation(msaIDs)

length(populationList)
names(populationList)
head(populationList, 3)

saveRDS(populationList, file = "~/GHI/R/data/populationList.rds")
```

## Top Three MSAs

Let's inspect the top three MSAs by population size.

```{r msa2, eval = TRUE, echo = TRUE, warning = FALSE, error = FALSE, message = FALSE}
totalPop <- lapply(populationList,sum) %>% unlist
totalPop[totalPop %>% order(., decreasing = TRUE)] %>% head(., 3)
msaIDFile %>% filter(msaNHTS %in% c(4472,5602,1602)) %>% select(msaName,msaNHTS) %>% unique
```

It's L.A. New York and Chicago.  Seems right.

Notice the non-uniqueness of `msaNHTS` in the data.

